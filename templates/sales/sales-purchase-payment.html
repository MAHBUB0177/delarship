{% load static %}
{% load crispy_forms_tags %}

<div class="modal-header"> </div>
{% csrf_token %}
<div class="container">
    <h4 align="center">Purchase Payment Details</h4>
    <div class="card">
        <div class="card-body">
            <div>
                <form method="post" id="stock_edit_form" data-url="{% url 'sales-purchase-payment' id %}"
                    class="update-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-4 mb-0">
                            {{ form.stock_date|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.tran_type_code|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.account_number|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.voucher_number|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.payment_comments|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.total_quantity|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.total_price|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.discount_amount|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.total_price_after_disc|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.total_pay|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.due_amount|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.stock_id|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.branch_code|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-4 mb-0">
                            {{ form.show_room|as_crispy_field }}
                        </div>
                    </div>
            </div>
            </form>
            <div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="modal-header"> </div>
        <h4 align="center">Purchase Product Details</h4>

        <table id="data_table_sheet" class="table table-hover table-bordered table-sm">
            <thead>
                <tr>
                    <th class="text-center">Product Name</th>
                    <th class="text-center">Quantity</th>
                    <th class="text-center">Purchase Rate</th>
                    <th class="text-center">Total Price</th>
                    <th class="text-center">Total Discount</th>
                    <th class="text-center">Price After Discount</th>
                </tr>
            </thead>
            <tbody>
                {% for rows in dtl_data %}
                <tr>
                    <td class="text-left" data-type="name">{{ rows.product_name }}</td>
                    <td class="text-center" data-type="inst">{{ rows.quantity }}</td>
                    <td class="text-right" data-type="inst">{{ rows.purces_price }}</td>
                    <td class="text-right" data-type="inst">{{ rows.total_price }}</td>
                    <td class="text-right" data-type="inst">{{ rows.discount_amount }}</td>
                    <td class="text-right" data-type="inst">{{ rows.price_after_discount }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger btn-default pull-right" data-dismiss="modal">Close</button>
        <button type="submit" id="btnSubmit" class="btn btn-primary">Approve</button>
    </div>
</div>

<script src="{% static 'assets/javascript/pages/sales/sales-purchase-payment.js' %}"></script>
